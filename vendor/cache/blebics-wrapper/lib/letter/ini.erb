<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta charset="UTF-8" />
    <title>EBICS ini</title>
  </head>
  <body>
    <div>
      <h2>EBICS-Initialisierungsbrief (INI)</h2>
      <table>
        <tr>
          <td>
            Datum
          </td>
          <td>
            <%= Date.today.strftime("%d.%m.%Y") %>
          </td>
        </tr>
        <tr>
          <td>
            Uhrzeit
          </td>
          <td>
            <%= Time.now.strftime("%H:%M:%S") %>
          </td>
        </tr>
        <tr>
          <td>
            Empfänger
          </td>
          <td>
            <%= bankname %>
          </td>
        </tr>
        <tr>
          <td>
            User-ID
          </td>
          <td>
            <%= user_id %>
          </td>
        </tr>
        <tr>
          <td>
            Kunden-ID
          </td>
          <td>
            <%= partner_id %>
          </td>
        </tr>
      </table>
      <% letter_helper = LetterHelper.new(a) %>
      <p>Öffentlicher Schlüssel für die elektronische Unterschrift (A006)</p>
      <p>Exponent (<%= letter_helper.exponent_size %> Bit):</p>
      <p><code><%= letter_helper.exponent_string %></code></p>
      <p>Modulus (<%= letter_helper.modulus_size %> Bit):</p>
      <p><code><%= letter_helper.pretty_format(:modulus_string) %></code></p>
      <p>Hash (SHA-256):</p>
      <p>
      <code><%= letter_helper.pretty_format(:sha256) %></code>
      </p>
      <p>Ich bestätige hiermit den obigen öffentlichen Schlüssel für meine elektronische Unterschrift.</p>
      <br/>
      <br/>
      <br/>
      <br/>
      <table>
        <tr>
          <td>
            _________________________
          </td>
          <td>
            _________________________
          </td>
          <td>
            _________________________
          </td>
        </tr>
        <tr>
          <td>
            Ort/Datum
          </td>
          <td>
            Name/Firma
          </td>
          <td>
            Unterschrift
          </td>
        </tr>
      </table>
    </div>
    <div style="page-break-after:always"></div>
    <h2>EBICS-Initialisierungsbrief (HIA) - Seite 1/2</h2>
    <table>
      <tr>
        <td>
          Datum
        </td>
        <td>
          <%= Date.today.strftime("%d.%m.%Y") %>
        </td>
      </tr>
      <tr>
        <td>
          Uhrzeit
        </td>
        <td>
          <%= Time.now.strftime("%H:%M:%S") %>
        </td>
      </tr>
      <tr>
        <td>
          Empfänger
        </td>
        <td>
          <%= bankname %>
        </td>
      </tr>
      <tr>
        <td>
          User-ID
        </td>
        <td>
          <%= user_id %>
        </td>
      </tr>
      <tr>
        <td>
          Kunden-ID
        </td>
        <td>
          <%= partner_id %>
        </td>
      </tr>
    </table>
    <div>
      <% letter_helper = LetterHelper.new(x) %>
      <p>Öffentlicher Authentifikationsschlüssel (X002)</p>
      <p>Exponent (<%= letter_helper.exponent_size %> Bit):</p>
      <p><code><%= letter_helper.exponent_string %></code></p>
      <p>Modulus (<%= letter_helper.modulus_size %> Bit):</p>
      <p><code><%= letter_helper.pretty_format(:modulus_string) %></code></p>
      <p>Hash (SHA-256):</p>
      <p>
      <code><%= letter_helper.pretty_format(:sha256) %></code>
      </p>
      <p> Fortsetzung auf Seite 2 ...</p>
      <div style="page-break-after:always"></div>
      <h2>EBICS-Initialisierungsbrief (HIA) - Seite 2/2</h2>
      <table>
        <tr>
          <td>
            Datum
          </td>
          <td>
            <%= Date.today.strftime("%d.%m.%Y") %>
          </td>
        </tr>
        <tr>
          <td>
            Uhrzeit
          </td>
          <td>
            <%= Time.now.strftime("%H:%M:%S") %>
          </td>
        </tr>
        <tr>
          <td>
            Empfänger
          </td>
          <td>
            <%= bankname %>
          </td>
        </tr>
        <tr>
          <td>
            User-ID
          </td>
          <td>
            <%= user_id %>
          </td>
        </tr>
        <tr>
          <td>
            Kunden-ID
          </td>
          <td>
            <%= partner_id %>
          </td>
        </tr>
      </table>
    </div>
    <div>
      <% letter_helper = LetterHelper.new(e) %>
      <p>Öffentlicher Verschlüsselungsschlüssel (E002)</p>
      <p>Exponent (<%= letter_helper.exponent_size %> Bit):</p>
      <p><code><%= letter_helper.exponent_string %></code></p>
      <p>Modulus (<%= letter_helper.modulus_size %> Bit):</p>
      <p><code><%= letter_helper.pretty_format(:modulus_string) %></code></p>
      <p>Hash (SHA-256):</p>
      <p><code><%= letter_helper.pretty_format(:sha256) %></code></p>
      <p>Ich bestätige hiermit die obigen öffentlichen Schlüssel für meinen EBICS-Zugang.</p>
      <br/>
      <br/>
      <br/>
      <br/>
      <table>
        <tr>
          <td>
            _________________________
          </td>
          <td>
            _________________________
          </td>
          <td>
            _________________________
          </td>
        </tr>
        <tr>
          <td>
            Ort/Datum
          </td>
          <td>
            Name/Firma
          </td>
          <td>
            Unterschrift
          </td>
        </tr>
      </table>
    </div>
  </body>
</html>
